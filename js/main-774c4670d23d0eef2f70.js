(()=>{"use strict";var e,t,n,o={1181:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(8081),a=n.n(o),r=n(3645),l=n.n(r)()(a());l.push([e.id,".Button {\n  display: inline-block;\n  font-weight: 400;\n  text-align: center;\n  white-space: nowrap;\n  user-select: none;\n  border: 1px solid transparent;\n  padding: 0.375rem 0.75rem;\n  font-size: 1rem;\n  line-height: 1.5;\n  border-radius: 0.25rem;\n}\n.Button_block {\n  width: 100%;\n}\n.Button_primary {\n  color: #fff;\n  background-color: #007bff;\n  border-color: #007bff;\n}\n.Button_secondary {\n  color: #fff;\n  background-color: #6c757d;\n  border-color: #6c757d;\n}\n.Button_disabled {\n  color: rgba(255, 255, 255, 0.5);\n  background-color: rgba(108, 117, 125, 0.6);\n  border-color: transparent;\n  cursor: not-allowed;\n}\n",""]);const i=l},9825:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(8081),a=n.n(o),r=n(3645),l=n.n(r)()(a());l.push([e.id,".form-input {\n  display: block;\n  width: 100%;\n  height: calc(2.25rem + 2px);\n  padding: 0.375rem 0.75rem;\n  font-size: 1rem;\n  line-height: 1.5;\n  color: #495057;\n  background-color: #fff;\n  background-clip: padding-box;\n  border: 1px solid #ced4da;\n  border-radius: 0.25rem;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n",""]);const i=l},2030:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(8081),a=n.n(o),r=n(3645),l=n.n(r)()(a());l.push([e.id,".ImgIconWrapper {\n  width: var(--img-icon-width);\n  height: var(--img-icon-height);\n  overflow: hidden;\n  display: inline-block;\n  position: relative;\n  vertical-align: text-top;\n}\n.ImgIcon {\n  height: var(--img-icon-height);\n  width: var(--img-icon-collection-width);\n  display: inline-block;\n  background-repeat: no-repeat;\n  background-size: cover;\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n",""]);const i=l},2652:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(8081),a=n.n(o),r=n(3645),l=n.n(r)()(a());l.push([e.id,".modal {\n  padding: 5px;\n  border: 1px solid black;\n  display: none;\n}\n.modal_entering {\n  display: block;\n  opacity: 0;\n  transition: opacity 0.2s;\n}\n.modal_open {\n  display: block;\n  opacity: 1;\n}\n.modal_leaving {\n  opacity: 0;\n  transition: opacity 0.2s;\n}\n",""]);const i=l},5641:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(8081),a=n.n(o),r=n(3645),l=n.n(r)()(a());l.push([e.id,".popup {\n  border: 2px solid #ececec;\n  width: 470px;\n  position: absolute;\n  background-color: lightgray;\n  box-shadow: 0 0 60px 0 rgba(0, 0, 0, 0.5);\n  display: none;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%) scale(0);\n  z-index: 1001;\n}\n.popup_entering {\n  display: block;\n  transition: transform ease 0.15s;\n  transform: translate(-50%, -50%) scale(0);\n}\n.popup_open {\n  display: block;\n  transform: translate(-50%, -50%) scale(1);\n}\n.popup_leaving {\n  transition: transform ease 0.15s;\n  transform: translate(-50%, -50%) scale(0);\n}\n.popup-body {\n  padding: 30px 24px 24px 24px;\n}\n.popup-content {\n  display: flex;\n}\n.popup-content__icon {\n  flex-grow: 0;\n  margin-right: 18px;\n}\n.popup-content__text {\n  flex-grow: 1;\n  max-height: 200px;\n  overflow: auto;\n}\n.popup-bg {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: none;\n  z-index: 1000;\n}\n.popup-bg_entering {\n  display: block;\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n.popup-bg_open {\n  display: block;\n  opacity: 1;\n}\n.popup-bg_leaving {\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n",""]);const i=l},4644:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(8081),a=n.n(o),r=n(3645),l=n.n(r)()(a());l.push([e.id,".popup-buttons-container {\n  padding-top: 50px;\n  text-align: right;\n}\n",""]);const i=l},7220:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(8081),a=n.n(o),r=n(3645),l=n.n(r)()(a());l.push([e.id,".popup-title {\n  padding: 15px;\n  background-color: #ececec;\n  display: flex;\n}\n.popup-title-section {\n  flex-grow: 1;\n  position: relative;\n}\n.popup-title-section:last-child {\n  flex-grow: 0;\n}\n.popup-title-text {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  position: absolute;\n  left: 0;\n  right: 15px;\n}\n.popup-title-close {\n  background: none;\n  color: inherit;\n  border: none;\n  padding: 0;\n  font: inherit;\n  cursor: pointer;\n  outline: inherit;\n  flex-grow: 0;\n}\n",""]);const i=l},7237:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(8081),a=n.n(o),r=n(3645),l=n.n(r)()(a());l.push([e.id,".ClearButton {\n  border: none;\n  margin: 0;\n  padding: 0;\n  width: auto;\n  overflow: visible;\n  background: transparent;\n  cursor: pointer;\n  /* inherit font & color from ancestor */\n  color: inherit;\n  font: inherit;\n  /* Normalize 'line-height'. Cannot be changed from 'normal' in Firefox 4+. */\n  line-height: normal;\n  /* Corrects font smoothing for webkit */\n  -webkit-font-smoothing: inherit;\n  -moz-osx-font-smoothing: inherit;\n  /* Corrects inability to style clickable 'input' types in iOS */\n  -webkit-appearance: none;\n}\n.MenuButton {\n  border: none;\n  margin: 0;\n  padding: 0;\n  width: auto;\n  overflow: visible;\n  background: transparent;\n  cursor: pointer;\n  /* inherit font & color from ancestor */\n  color: inherit;\n  font: inherit;\n  /* Normalize 'line-height'. Cannot be changed from 'normal' in Firefox 4+. */\n  line-height: normal;\n  /* Corrects font smoothing for webkit */\n  -webkit-font-smoothing: inherit;\n  -moz-osx-font-smoothing: inherit;\n  /* Corrects inability to style clickable 'input' types in iOS */\n  -webkit-appearance: none;\n  background-color: #d3d3d3;\n  padding: 4px 6px;\n  border-radius: 3px;\n  float: left;\n  margin-right: 5px;\n  outline: none;\n  display: flex;\n}\n.MenuButton:active,\n.MenuButton:focus {\n  outline: 0;\n}\n.MenuButton:hover {\n  background-color: #c5c5c5;\n}\n.MenuButton_active {\n  background-color: #c5c5c5;\n}\n.MenuButton_posRelative {\n  position: relative;\n}\n.MenuButton_disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n",""]);const i=l},1490:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(8081),a=n.n(o),r=n(3645),l=n.n(r)()(a());l.push([e.id,".Separator {\n  border-right: 1px solid #c1c1c1;\n  margin-right: 5px;\n}\n.SeparatorWrapper {\n  float: left;\n  padding: 1px 0;\n}\n.SeparatorWrapper_hide {\n  display: none;\n}\n",""]);const i=l},7467:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(8081),a=n.n(o),r=n(3645),l=n.n(r)()(a());l.push([e.id,".TopMenuItem__Content {\n  flex-grow: 1;\n  min-width: 22px;\n  text-align: center;\n  font-size: 95%;\n  font-family: Lato, Arial, serif;\n}\n.TopMenuItem__Caret {\n  flex-grow: 0;\n  padding-left: 5px;\n}\n.TopMenuItem__Submenu {\n  position: absolute;\n  display: none;\n  top: 100%;\n  padding-top: 5px;\n  z-index: 10;\n}\n.TopMenuItem__Submenu_open {\n  display: block;\n}\n",""]);const i=l},5858:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(8081),a=n.n(o),r=n(3645),l=n.n(r)()(a());l.push([e.id,".MIStrokeColor__Current {\n  display: inline-block;\n  width: 19px;\n  height: 17px;\n  vertical-align: bottom;\n}\n",""]);const i=l},5737:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(8081),a=n.n(o),r=n(3645),l=n.n(r)()(a());l.push([e.id,".MIStrokeWidth__Content {\n  display: inline-block;\n}\n",""]);const i=l},9387:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(8081),a=n.n(o),r=n(3645),l=n.n(r)()(a());l.push([e.id,".MsgBubble {\n  padding: 3px 9px;\n  border-radius: 5px;\n}\n.MsgBubble_success {\n  background-color: #a9c994;\n}\n",""]);const i=l},8032:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(8081),a=n.n(o),r=n(3645),l=n.n(r)()(a());l.push([e.id,".Notifications {\n  position: absolute;\n  left: 50%;\n  z-index: 100;\n}\n",""]);const i=l},1433:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(8081),a=n.n(o),r=n(3645),l=n.n(r),i=n(4075),s=n(3598),c=l()(a());c.i(i.Z),c.i(s.Z),c.push([e.id,"html {\n  height: 100%;\n}\nbody {\n  background-color: #e2e2e2;\n  height: 100%;\n  overflow: hidden;\n}\n#app {\n  height: 100%;\n  display: flex;\n  flex-flow: column;\n}\n",""]);const d=c},2767:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(7294),a=n(5530),r=n.n(a);class l extends o.PureComponent{constructor(){super(...arguments),this.handleClickOutside=()=>{const{onClickOutside:e}=this.props;e()}}render(){return this.props.children}}const i=r()(l)},1070:(e,t,n)=>{var o=n(7294),a=n(3935),r=n(9711),l=n(6974),i=n(6486),s=n.n(i),c=n(9163);const d=c.ZP.div`
  position: fixed;
  bottom: 0;
  right: 5px;
  opacity: 0.2;
`;class u extends o.PureComponent{constructor(){super(...arguments),this.defaultVersion="x.xx",this.state={version:this.defaultVersion}}componentDidMount(){const e=document.querySelector('[name="app-version"]');e&&this.setState({version:e.getAttribute("content")||this.defaultVersion})}render(){return o.createElement(d,null,this.state.version)}}const p=u;var m=n(8328),h=n(8910),b=n(9998);const g=e=>{const{open:t}=e,{state:{canvas:{canvasApi:n}}}=(0,o.useContext)(b.z),a=(0,o.useRef)(null);return(0,o.useEffect)((()=>{t&&a.current?.click()}),[t]),o.createElement("input",{type:"file",onChange:()=>{const e=s().get(a,"current.files[0]",null);e&&(0,h.Z)(e).then((e=>{n?.setImage({image:e.image,name:e.name}),a.current&&(a.current.value="")}))},ref:a,style:{display:"none"}})},v="#D3D3D3",f="#c1c1c1";var E,k=n(3379),y=n.n(k),C=n(7795),A=n.n(C),S=n(569),w=n.n(S),x=n(3565),Z=n.n(x),T=n(9216),P=n.n(T),I=n(4589),R=n.n(I),O=n(2030),_={};_.styleTagTransform=R(),_.setAttributes=Z(),_.insert=w().bind(null,"head"),_.domAPI=A(),_.insertStyleElement=P(),y()(O.Z,_),O.Z&&O.Z.locals&&O.Z.locals,function(e){e[e.load=0]="load",e[e.save=1]="save",e[e.copy=2]="copy",e[e.arrow=3]="arrow",e[e.text=4]="text",e[e.rectangle=5]="rectangle",e[e.circle=6]="circle",e[e.rectSelect=7]="rectSelect",e[e.resize=8]="resize",e[e.strokeWidth=9]="strokeWidth",e[e.fontSize=10]="fontSize",e[e.check=11]="check",e[e.zoom=12]="zoom",e[e.info=13]="info",e[e.undo=14]="undo",e[e.redo=15]="redo",e[e.sendToBack=16]="sendToBack",e[e.bringToFront=17]="bringToFront",e[e.chevronDown=18]="chevronDown"}(E||(E={}));const z=e=>{const{icon:t}=e,n=(0,o.useRef)(null);return(0,o.useEffect)((()=>{const e=Object.keys(E).length/2;n.current?.style.setProperty("--img-icon-width",(t===E.chevronDown?10:20)+"px"),n.current?.style.setProperty("--img-icon-height","20px"),n.current?.style.setProperty("--img-icon-collection-width",20*e+"px")}),[]),Number(t),o.createElement("span",{className:"ImgIconWrapper",ref:n},o.createElement("span",{className:"ImgIcon",style:{backgroundImage:"url('data:image/png;base64,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')",left:t===E.chevronDown?-1*Number(t)*20-7:-1*Number(t)*20}}))},N=c.ZP.div`
  background-color: ${v};
  border: 1px solid ${f};
  border-radius: 3px;
  padding: 3px;
`,M=c.ZP.div`
  padding: 4px 10px;
  border-bottom: 1px dashed ${f};
  display: flex;
  text-align: left;

  &:last-child {
    border-bottom: none;
  }
`,W=c.ZP.div`
  flex-grow: 1;
`,F=c.ZP.div`
  flex-grow: 0;
  padding-left: 10px;
`;class U extends o.PureComponent{static renderCheck(e){return e.selected?o.createElement(F,null,o.createElement(z,{icon:E.check})):null}render(){const{data:e}=this.props;return o.createElement(N,null,e.map((e=>o.createElement(M,{onClick:t=>{e.onClick(e,t)},key:`submenu-item-${e.text}`},o.createElement(W,null,e.text),U.renderCheck(e)))))}}U.defaultProps={data:[]};const q=U;var B=n(7237),j={};j.styleTagTransform=R(),j.setAttributes=Z(),j.insert=w().bind(null,"head"),j.domAPI=A(),j.insertStyleElement=P(),y()(B.Z,j),B.Z&&B.Z.locals&&B.Z.locals;var D=n(4184),L=n.n(D);const Y=e=>{const{disabled:t=!1,active:n=!1,onClick:a,className:l,title:i,posRelative:s,link:{href:c=""}={}}=e,d=L()(l,"MenuButton",{MenuButton_active:n,MenuButton_posRelative:s,MenuButton_disabled:t});return 0===c.length?o.createElement("button",{className:d,onClick:a,title:i,disabled:t,type:"button"},e.children):c.startsWith("http")?o.createElement("a",{className:d,onClick:a,title:i,href:c},e.children):o.createElement(r.rU,{className:d,onClick:a,title:i,to:c},e.children)};var H=n(7467),G={};G.styleTagTransform=R(),G.setAttributes=Z(),G.insert=w().bind(null,"head"),G.domAPI=A(),G.insertStyleElement=P(),y()(H.Z,G),H.Z&&H.Z.locals&&H.Z.locals;var X=n(9477);const Q=e=>{const{subMenu:t=[],disabled:n,active:a,link:r,open:l=!1,title:i="",onClick:c,stopPropagation:d=!0,children:u}=e,{state:{canvas:{canvasApi:p}},dispatch:m}=(0,o.useContext)(b.z);(0,o.useEffect)((()=>{const e=()=>{m((0,X.uC)(""))};let t=s().noop,n=s().noop;return p&&(t=p.onShapesBlurred(e),n=p.onShapeClicked(e)),()=>{t(),n()}}),[]);const h=()=>t.length>0;return o.createElement(Y,{disabled:n,active:a,onClick:e=>{d&&e.stopPropagation(),c&&c(e)},link:r,title:i,posRelative:h()},o.createElement("span",{className:"TopMenuItem__Content"},u),h()?o.createElement(o.Fragment,null,o.createElement("span",{className:"TopMenuItem__Caret"},o.createElement(z,{icon:E.chevronDown})),o.createElement("div",{className:L()({TopMenuItem__Submenu:!0,TopMenuItem__Submenu_open:l})},o.createElement(q,{data:t}))):null)};var V=n(7732);const J=e=>{const{disabled:t=!1}=e,[n,a]=(0,o.useState)(!1);return o.createElement(o.Fragment,null,o.createElement(Q,{onClick:()=>{a(!0),setTimeout((()=>{a(!1)}),100),m.qP({eventCategory:m.Ak.MenuClick,eventAction:m.UZ.OpenImage})},disabled:t,title:(0,V.t)("menu.openImage"),stopPropagation:!1},o.createElement(z,{icon:E.load})),o.createElement(g,{open:n}))},K=c.ZP.div`
  margin-bottom: 1rem;
`,$=c.ZP.div`
  position: absolute;
  color: #f44336;
`;class ee extends o.PureComponent{renderError(){return""!==this.props.errorText?o.createElement($,null,this.props.errorText):null}render(){return o.createElement(K,null,this.props.children,this.renderError())}}ee.defaultProps={errorText:""};const te=ee;var ne=n(9825),oe={};oe.styleTagTransform=R(),oe.setAttributes=Z(),oe.insert=w().bind(null,"head"),oe.domAPI=A(),oe.insertStyleElement=P(),y()(ne.Z,oe),ne.Z&&ne.Z.locals&&ne.Z.locals;const ae=(0,o.forwardRef)(((e,t)=>o.createElement("input",{...e,ref:t,className:"form-input"})));var re=n(4644),le={};le.styleTagTransform=R(),le.setAttributes=Z(),le.insert=w().bind(null,"head"),le.domAPI=A(),le.insertStyleElement=P(),y()(re.Z,le),re.Z&&re.Z.locals&&re.Z.locals;const ie=e=>o.createElement("div",{className:"popup-buttons-container"},e.children),se=c.ZP.div`
  margin-right: 14px;
  display: inline-block;

  &:last-child {
    margin-right: 0;
  }
`,ce=e=>o.createElement(o.Fragment,null,o.Children.map(e.children,(e=>o.createElement(se,null,e))));var de,ue=n(1181),pe={};pe.styleTagTransform=R(),pe.setAttributes=Z(),pe.insert=w().bind(null,"head"),pe.domAPI=A(),pe.insertStyleElement=P(),y()(ue.Z,pe),ue.Z&&ue.Z.locals&&ue.Z.locals,function(e){e[e.PRIMARY=0]="PRIMARY",e[e.SECONDARY=1]="SECONDARY"}(de||(de={}));const me=e=>{const{appearance:t,children:n,block:a=!1,disabled:r,type:l="button",...i}=e;return o.createElement("button",{className:L()({Button:!0,Button_primary:t===de.PRIMARY||!t,Button_secondary:t===de.SECONDARY,Button_block:a,Button_disabled:r}),disabled:r,type:l,...i},n)};var he=n(2767),be=n(2652),ge={};ge.styleTagTransform=R(),ge.setAttributes=Z(),ge.insert=w().bind(null,"head"),ge.domAPI=A(),ge.insertStyleElement=P(),y()(be.Z,ge),be.Z&&be.Z.locals&&be.Z.locals;const ve=e=>{const{base:t,onClose:n,show:r,onOpen:l,hideClickOutside:i,children:c,baseClass:d,className:u}=e,p=(0,o.useRef)(null),m=(0,o.useRef)(null),[h,b]=(0,o.useState)(!1),[g,v]=(0,o.useState)(!1),[f,E]=(0,o.useState)(!1),[k,y]=(0,o.useState)(!1);(0,o.useEffect)((()=>(t&&(p.current&&t.removeChild(p.current),p.current=document.createElement("div"),t.appendChild(p.current)),y(!0),()=>{t&&p.current&&t.removeChild(p.current)})),[]),(0,o.useEffect)((()=>{k&&(r?(b(!0),setTimeout((()=>{v(!0)}))):E(!0))}),[r]);if(!s().isString(d)||d.replace(/\s+/," ").split(" ").length>1)throw new Error("baseClass may contain one class at most");const C=L()(d,u,{[`${d}_entering`]:h,[`${d}_open`]:g,[`${d}_leaving`]:f}),A=o.createElement("div",{className:C,onTransitionEnd:e=>{e.target===m.current&&(h&&b(!1),f&&(v(!1),E(!1)),g&&l&&l())},ref:m},i?o.createElement(he.Z,{onClickOutside:()=>{!h&&g&&n&&n()}},c):c);return t&&p.current?(0,a.createPortal)(A,p.current):A},fe=e=>{const{buttons:t}=e;if(t&&t.length>0)return o.createElement(ie,null,o.createElement(ce,null,t.map(((e,t)=>o.createElement(me,{...e,key:`popup-button-${t}`,type:"button"},e.text)))));const n=t;return o.createElement(ie,null,o.createElement(me,{...n,type:"button"},n.text))};var Ee=n(5641),ke={};ke.styleTagTransform=R(),ke.setAttributes=Z(),ke.insert=w().bind(null,"head"),ke.domAPI=A(),ke.insertStyleElement=P(),y()(Ee.Z,ke),Ee.Z&&Ee.Z.locals&&Ee.Z.locals;var ye=n(7220),Ce={};Ce.styleTagTransform=R(),Ce.setAttributes=Z(),Ce.insert=w().bind(null,"head"),Ce.domAPI=A(),Ce.insertStyleElement=P(),y()(ye.Z,Ce),ye.Z&&ye.Z.locals&&ye.Z.locals;const Ae=c.iv`
  border: none;
  margin: 0;
  padding: 0;
  width: auto;
  overflow: visible;

  background: transparent;

  cursor: pointer;

  /* inherit font & color from ancestor */
  color: inherit;
  font: inherit;

  /* Normalize 'line-height'. Cannot be changed from 'normal' in Firefox 4+. */
  line-height: normal;

  /* Corrects font smoothing for webkit */
  -webkit-font-smoothing: inherit;
  -moz-osx-font-smoothing: inherit;

  /* Corrects inability to style clickable 'input' types in iOS */
  -webkit-appearance: none;
`,Se=c.ZP.button`
  ${Ae}
`,we=e=>{const{title:t,showCloseBtn:n,onClose:a}=e;return o.createElement("div",{className:"popup-title"},o.createElement("div",{className:"popup-title-section"},t.length>0?o.createElement("div",{className:"popup-title-text"},t):o.createElement("span",null," ")),o.createElement("div",{className:"popup-title-section"},n?o.createElement(Se,{onClick:a,type:"button",className:"popup-title-close"},"×"):o.createElement("span",null," ")))},xe=e=>{const{onClose:t,onOpen:n,contentIcon:a,base:r,className:l,buttons:i,hideClickOutside:s,title:c,show:d,children:u}=e;return o.createElement(o.Fragment,null,o.createElement(ve,{baseClass:"popup-bg",show:d,hideClickOutside:!1,base:r},o.createElement("div",null)),o.createElement(ve,{className:l,baseClass:"popup",show:d,hideClickOutside:s,onClose:t,onOpen:n,base:r},o.createElement("div",null,!!c&&o.createElement(we,{title:c,onClose:t,showCloseBtn:!0}),o.createElement("div",{className:"popup-body"},a?o.createElement("div",{className:"popup-content"},o.createElement("div",{className:"popup-content__icon"},a),o.createElement("div",{className:"popup-content__text"},u)):u,!!i&&o.createElement(fe,{buttons:i})))))},Ze=e=>{const{onCancel:t,onSubmit:n,nameInit:a,show:r}=e,[l,i]=(0,o.useState)(""),[s,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)(""),p=(0,o.useRef)(null);return(0,o.useEffect)((()=>{r&&(i(a),c(!1),setTimeout((()=>{p.current?.focus()})))}),[r]),(0,o.useEffect)((()=>{""===l.replace(/\s/g,"")&&s?u("Name can't be empty"):u("")}),[l]),o.createElement(xe,{showCloseBtn:!1,onClose:()=>{i(""),u(""),t()},show:r},o.createElement("form",{onSubmit:e=>{e.preventDefault(),n(l)}},o.createElement(te,{errorText:d},o.createElement("label",{htmlFor:"saveAs"},"Save as (*.png)"),o.createElement(ae,{placeholder:"Enter file name",id:"saveAs",value:l,ref:p,onChange:e=>{i(e.target.value),c(!0)}})),o.createElement(ie,null,o.createElement(ce,null,o.createElement(me,{onClick:t,appearance:de.SECONDARY},"Cancel"),o.createElement(me,{type:"submit",disabled:""!==d},"Save")))))},Te=e=>{const{disabled:t=!1}=e,[n,a]=(0,o.useState)(!1),{state:{canvas:{canvasApi:r}}}=(0,o.useContext)(b.z);return o.createElement(o.Fragment,null,o.createElement(Q,{onClick:()=>{a(!0),m.qP({eventCategory:m.Ak.MenuClick,eventAction:m.UZ.SaveImage})},title:(0,V.t)("menu.save"),disabled:t,stopPropagation:!1},o.createElement(z,{icon:E.save})),o.createElement(Ze,{onSubmit:e=>{""!==e&&(r?.exportCanvasToImage(e.trim()),a(!1))},onCancel:()=>{a(!1)},show:n,nameInit:""}))};var Pe=n(5622);const Ie=e=>{const{disabled:t=!1}=e,{state:{canvas:{canvasApi:n}},dispatch:a}=(0,o.useContext)(b.z);return o.createElement(Q,{onClick:()=>{requestAnimationFrame((()=>{n?.copyAllToClipboard(),a((0,Pe.c)({message:(0,V.t)("all-copied")}))})),m.qP({eventCategory:m.Ak.MenuClick,eventAction:m.UZ.CopyAll})},disabled:t,stopPropagation:!1,title:(0,V.t)("menu.copyAll")},o.createElement(z,{icon:E.copy}))};var Re=n(5822);const Oe=e=>{const{disabled:t=!1}=e,{state:{menu:n,canvas:{canvasApi:a}},dispatch:r}=(0,o.useContext)(b.z);return o.createElement(Q,{onClick:()=>{a?.startAddingShape({type:Re.Z.ARROW,options:{strokeColor:n.strokeColor,strokeWidth:n.strokeWidth}}),r((0,X.rE)(Re.Z.ARROW)),m.qP({eventCategory:m.Ak.MenuClick,eventAction:m.UZ.AddArrow})},disabled:t,active:n.selectedShapeToAdd===Re.Z.ARROW,title:(0,V.t)("menu.addArrow")},o.createElement(z,{icon:E.arrow}))},_e=e=>{const{disabled:t}=e,{state:{menu:n,canvas:{canvasApi:a}},dispatch:r}=(0,o.useContext)(b.z);return o.createElement(Q,{onClick:()=>{a?.startAddingShape({type:Re.Z.TEXT,options:{fillColor:n.strokeColor,fontSize:n.fontSize}}),r((0,X.rE)(Re.Z.TEXT)),m.qP({eventCategory:m.Ak.MenuClick,eventAction:m.UZ.AddText})},disabled:t,active:n.selectedShapeToAdd===Re.Z.TEXT,title:(0,V.t)("menu.addText")},o.createElement(z,{icon:E.text}))},ze=e=>{const{disabled:t=!1}=e,{state:{menu:n,canvas:{canvasApi:a}},dispatch:r}=(0,o.useContext)(b.z);return o.createElement(Q,{onClick:()=>{a?.startAddingShape({type:Re.Z.RECT,options:{strokeColor:n.strokeColor,strokeWidth:n.strokeWidth}}),r((0,X.rE)(Re.Z.RECT)),m.qP({eventCategory:m.Ak.MenuClick,eventAction:m.UZ.AddRect})},disabled:t,active:n.selectedShapeToAdd===Re.Z.RECT,title:(0,V.t)("menu.addRect")},o.createElement(z,{icon:E.rectangle}))},Ne=e=>{const{disabled:t=!1}=e,{state:{menu:n,canvas:{canvasApi:a}},dispatch:r}=(0,o.useContext)(b.z);return o.createElement(Q,{onClick:()=>{a?.startAddingShape({type:Re.Z.ELLIPSE,options:{strokeColor:n.strokeColor,strokeWidth:n.strokeWidth}}),r((0,X.rE)(Re.Z.ELLIPSE)),m.qP({eventCategory:m.Ak.MenuClick,eventAction:m.UZ.AddEllipse})},disabled:t,active:n.selectedShapeToAdd===Re.Z.ELLIPSE,title:(0,V.t)("menu.addEllipse")},o.createElement(z,{icon:E.circle}))},Me=e=>{const{disabled:t=!1,reverse:n=!1}=e,{state:{canvas:{canvasApi:a}}}=(0,o.useContext)(b.z),r=n?(0,V.t)("menu.unsketchify"):(0,V.t)("menu.sketchify");return o.createElement(Q,{onClick:()=>{a?.sketchifyActiveShape(),m.qP({eventCategory:m.Ak.MenuClick,eventAction:m.UZ.Sketchify})},title:r,disabled:t},r)},We=e=>{const{children:t,fallback:n="Loading..."}=e;return o.createElement(o.Suspense,{fallback:n},t)};var Fe=n(5858),Ue={};Ue.styleTagTransform=R(),Ue.setAttributes=Z(),Ue.insert=w().bind(null,"head"),Ue.domAPI=A(),Ue.insertStyleElement=P(),y()(Fe.Z,Ue),Fe.Z&&Fe.Z.locals&&Fe.Z.locals;const qe=o.lazy((()=>Promise.all([n.e(776),n.e(178)]).then(n.bind(n,1352)))),Be=e=>{const{disabled:t=!1}=e,{state:{menu:n,canvas:{canvasApi:a}},dispatch:r}=(0,o.useContext)(b.z);return(0,o.useEffect)((()=>{const e=e=>{const t=(e=>{if(s().isFunction(e.getStrokeColor))return e.getStrokeColor();if(s().isFunction(e.getFillColor))return e.getFillColor();if(e.type!==Re.Z.IMAGE)throw new Error("Can't get shape color")})(e);t&&r((0,X.VY)(t))};let t=s().noop,n=s().noop;return a&&(t=a.onShapeClicked(e),n=a.onShapeDragStarted(e)),()=>{t(),n()}}),[a]),o.createElement(Q,{onClick:()=>{r((0,X.Mk)())},disabled:t},o.createElement("div",{className:"MIStrokeColor__Current",style:{backgroundColor:n.strokeColor}}),o.createElement(We,{fallback:null},o.createElement(qe,{onChange:e=>{r((0,X.VY)(e)),a?.setStrokeColorToActiveShape(e),m.qP({eventCategory:m.Ak.MenuClick,eventAction:m.UZ.ChangeColor})}})))};var je=n(5737),De={};De.styleTagTransform=R(),De.setAttributes=Z(),De.insert=w().bind(null,"head"),De.domAPI=A(),De.insertStyleElement=P(),y()(je.Z,De),je.Z&&je.Z.locals&&je.Z.locals;const Le="STROKE_WIDTH",Ye=e=>{const{disabled:t=!1}=e,{state:{menu:n,canvas:{canvasApi:a}},dispatch:r}=(0,o.useContext)(b.z);(0,o.useEffect)((()=>{const e=e=>{s().isFunction(e.getStrokeWidth)&&r((0,X.lz)(e.getStrokeWidth()))};let t=s().noop,n=s().noop;return a&&(t=a.onShapeClicked(e),n=a.onShapeDragStarted(e)),()=>{t(),n()}}),[a]);const l=e=>{r((0,X.lz)(e.value)),a?.setStrokeWidthToActiveShape(e.value),m.qP({eventCategory:m.Ak.MenuClick,eventAction:m.UZ.ChangeStrokeWidth})};return o.createElement(he.Z,{onClickOutside:()=>{n.openSubmenu===Le&&requestAnimationFrame((()=>{r((0,X.uC)(""))}))}},o.createElement(Q,{subMenu:[2,3,5,6,7,8,10].map((e=>({text:`${e}px`,value:e,selected:n.strokeWidth===e,onClick:l}))),open:n.openSubmenu===Le,disabled:t,onClick:()=>{r((0,X.uC)(""===n.openSubmenu?Le:""))}},o.createElement("span",{className:"MIStrokeWidth__Content"},n.strokeWidth,"px"),o.createElement(z,{icon:E.strokeWidth})))},He="FONT_SIZE",Ge=e=>{const{disabled:t}=e,{state:{menu:n,canvas:{canvasApi:a}},dispatch:r}=(0,o.useContext)(b.z),l=e=>{r((0,X.oL)(e.value)),a?.setFontSizeToActiveShape(e.value),m.qP({eventCategory:m.Ak.MenuClick,eventAction:m.UZ.ChangeFontSize,eventValue:e.value})};return o.createElement(he.Z,{onClickOutside:()=>{n.openSubmenu===He&&requestAnimationFrame((()=>{r((0,X.uC)(""))}))}},o.createElement(Q,{subMenu:[16,18,20,25,30,40,55,80].map((e=>({text:`${e}px`,value:e,selected:n.fontSize===e,onClick:l}))),open:n.openSubmenu===He,disabled:t,onClick:()=>{r((0,X.uC)(""===n.openSubmenu?He:""))}},o.createElement(z,{icon:E.fontSize})))},Xe=()=>o.createElement(Q,{link:{href:"https://github.com/artemdemo/imgreview"}},"Github"),Qe=e=>{const{state:{canvas:{canvasApi:t}}}=(0,o.useContext)(b.z);return o.createElement(Q,{onClick:()=>{t?.initBlankCanvas({width:800,height:500})},stopPropagation:!1},(0,V.t)("menu.blank"))},Ve=()=>o.createElement(Q,{link:{href:"/about"}},(0,V.t)("menu.about")),Je=c.ZP.div`
  &::after {
    content: '';
    display: table;
    clear: both;
  }
`,Ke=(0,c.ZP)(Je)`
  padding: 4px 15px;
  background-color: ${v};
  z-index: ${10};
`,$e=c.ZP.div`
  float: right;
`;var et=n(1004),tt=n(1490),nt={};nt.styleTagTransform=R(),nt.setAttributes=Z(),nt.insert=w().bind(null,"head"),nt.domAPI=A(),nt.insertStyleElement=P(),y()(tt.Z,nt),tt.Z&&tt.Z.locals&&tt.Z.locals;const ot=e=>{const{show:t=!0}=e;return o.createElement("span",{className:L()({SeparatorWrapper:!0,SeparatorWrapper_hide:!t})},o.createElement("span",{className:"Separator"}))},at=e=>{const{children:t}=e;return o.Children.toArray(t).length>0?o.createElement(o.Fragment,null,t,o.createElement(ot,null)):null},rt={showStrokeColor:!1,showStrokeWidth:!1,showCrop:!1,showFontSize:!1,showSketchify:!1,clickedShapeType:void 0},lt=()=>{const e=(0,o.useRef)(null),[t,n]=(0,o.useState)({...rt}),[a,r]=(0,o.useState)(!1),{state:{canvas:{canvasApi:l}},dispatch:i}=(0,o.useContext)(b.z),c=e=>{i((0,X.rE)()),i((0,X.Qc)());const t={...rt,clickedShapeType:e?.type};switch(e?.type){case Re.Z.ARROW:case Re.Z.RECT_ROUGH:case Re.Z.ELLIPSE_ROUGH:t.showStrokeColor=!0,t.showStrokeWidth=!0;break;case Re.Z.RECT:case Re.Z.ELLIPSE:t.showStrokeColor=!0,t.showStrokeWidth=!0,t.showSketchify=!0;break;case Re.Z.TEXT:t.showStrokeColor=!0,t.showFontSize=!0;break;case Re.Z.SELECT_RECT:t.showCrop=!0}n(t)},d=async()=>{if(l){const e=await l.getShapesAmount();r(e>0)}};return(0,o.useEffect)((()=>{const{offsetHeight:t}=e.current||{};t&&i((0,X.Nv)(t));let n=s().noop,o=s().noop,a=s().noop,r=s().noop,u=s().noop;return l&&(n=l.onShapesBlurred(c),o=l.onShapeClicked((e=>{requestAnimationFrame((()=>c(e)))})),a=l.onShapeDragStarted((e=>{requestAnimationFrame((()=>c(e)))})),r=l.onShapeAdded((async({addedShape:e})=>{c(e),d()})),u=l.onShapeDeleted(d),d()),()=>{n(),o(),a(),r(),u()}}),[l]),o.createElement(Ke,{onClick:()=>{l?.blurShapes()},ref:e},o.createElement(at,null,o.createElement(J,null),o.createElement(Te,{disabled:!a}),o.createElement(Ie,{disabled:!a})),o.createElement(at,null,o.createElement(Oe,null),o.createElement(_e,null),o.createElement(ze,null),o.createElement(Ne,null)),o.createElement(at,null,t.showStrokeColor&&o.createElement(Be,null),t.showStrokeWidth&&o.createElement(Ye,null),t.showFontSize&&o.createElement(Ge,null),t.showSketchify&&o.createElement(Me,{reverse:t.clickedShapeType===Re.Z.RECT_ROUGH||t.clickedShapeType===Re.Z.ELLIPSE_ROUGH})),et.r&&o.createElement(Qe,null),o.createElement($e,null,o.createElement(Ve,null),o.createElement(Xe,null)))};var it=n(6808),st=n.n(it);const ct=(()=>{const e=navigator.userAgent||navigator.vendor||window?.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.slice(0,4))})(),dt=c.ZP.div`
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100%;
  background-color: #00000052;
  z-index: 100;
`,ut=c.ZP.div`
  position: absolute;
  top: 15%;
  left: 50%;
  transform: translateX(-50%);
  width: 300px;
  padding: 10px 10px 12px 10px;
  border-radius: 5px;
  background-color: white;
`,pt="mobileWarningShown",mt="true";class ht extends o.PureComponent{constructor(){super(...arguments),this.state={display:!1},this.handleGotIt=()=>{this.setState({display:!1}),st().set(pt,mt,{expires:30})}}componentDidMount(){ct&&st().get(pt)!==mt&&(this.setState({display:!0}),m.qP({eventCategory:m.Ak.GlobalInteraction,eventAction:m.UZ.ShownMobileWarning}))}render(){return this.state.display?o.createElement(dt,null,o.createElement(ut,null,o.createElement("p",null,"ImgReview currently does not support mobile devices."),o.createElement(me,{appearance:de.PRIMARY,onClick:this.handleGotIt,block:!0},"Got it"))):null}}const bt=ht;var gt=n(1433),vt={};vt.styleTagTransform=R(),vt.setAttributes=Z(),vt.insert=w().bind(null,"head"),vt.domAPI=A(),vt.insertStyleElement=P(),y()(gt.Z,vt),gt.Z&&gt.Z.locals&&gt.Z.locals;var ft=n(9387),Et={};Et.styleTagTransform=R(),Et.setAttributes=Z(),Et.insert=w().bind(null,"head"),Et.domAPI=A(),Et.insertStyleElement=P(),y()(ft.Z,Et),ft.Z&&ft.Z.locals&&ft.Z.locals;var kt=n(8477);const yt=e=>{const{children:t,type:n}=e;return o.createElement("div",{className:L()({MsgBubble:!0,MsgBubble_success:n===kt.k.Success})},t)};var Ct=n(8032),At={};At.styleTagTransform=R(),At.setAttributes=Z(),At.insert=w().bind(null,"head"),At.domAPI=A(),At.insertStyleElement=P(),y()(Ct.Z,At),Ct.Z&&Ct.Z.locals&&Ct.Z.locals;const St=()=>{const{state:{menu:e,notifications:t},dispatch:n}=(0,o.useContext)(b.z);return(0,o.useEffect)((()=>{const e=setInterval((()=>{const e=+new Date;t.list.forEach((t=>{e-Number(t.created)>5e3&&n((0,Pe.F)(t))}))}),900);return()=>{clearInterval(e)}}),[t]),o.createElement("div",{className:"Notifications",style:{top:`${e.menuHeight}px`}},t.list.map((e=>o.createElement(yt,{type:e.type,key:`${e.message}-${e.created}`},e.message))))},wt=o.lazy((()=>Promise.all([n.e(333),n.e(79)]).then(n.bind(n,9289)))),xt=()=>{const{state:{canvas:{canvasApi:e}}}=(0,o.useContext)(b.z),t=t=>{const n="HTML"===s().get(t.target,"tagName"),o=t.target&&"app"===t.target.getAttribute("id");(n||o)&&e?.blurShapes()};return(0,o.useEffect)((()=>(document.addEventListener("click",t),()=>{document.removeEventListener("click",t)})),[]),o.createElement(o.Fragment,null,o.createElement(p,null),o.createElement(lt,null),o.createElement(We,null,o.createElement(wt,null)),o.createElement(St,null),o.createElement(bt,null))},Zt=o.lazy((()=>n.e(678).then(n.bind(n,5779)).then((e=>({default:e.AboutView}))))),Tt=()=>o.createElement(b.W,null,o.createElement(r.VK,null,o.createElement(l.Z5,null,o.createElement(l.AW,{path:"/",element:o.createElement(xt,null)}),o.createElement(l.AW,{path:"/about",element:o.createElement(We,null,o.createElement(Zt,null))})))),Pt=("app",document.getElementById("app"));Pt.hasChildNodes()?a.hydrate(o.createElement(Tt,null),Pt):a.render(o.createElement(Tt,null),Pt)},9998:(e,t,n)=>{n.d(t,{z:()=>b,W:()=>g});var o=n(7294),a=n(6486),r=n.n(a),l=n(5622),i=n(8477);const s={list:[]};var c=n(9477);const d={strokeColor:"#ee2e21",selectedShapeStrokeColor:null,strokeWidth:3,fontSize:18,showColorPicker:!1,menuHeight:0,openSubmenu:"",selectedShapeToAdd:null};var u=n(4709);const p={canvasApi:null},m={notifications:s,menu:d,canvas:p},h=function(e){const t=Object.keys(e),n={};for(const o of t){if(r().isUndefined(e[o]))throw new Error(`No reducer provided for key "${o}"`);r().isFunction(e[o])&&(n[o]=e[o])}const o=Object.keys(n);return(e,t)=>{let a=!1;const l={};for(const i of o){const o=n[i],s=e[i],c=o(s,t);if(r().isUndefined(c)){const e="type"in t?t.type:"undefined";throw new Error(`State is undefined for ${i} and action ${e}`)}l[i]=c,a=a||c!==s}return a=a||o.length!==Object.keys(e).length,a?l:e}}({notifications:(e=s,t)=>{switch(t.type){case`${l.c}`:const n=t.payload;return{...e,list:[...e.list,new i.P(n)]};case`${l.F}`:const o=t.payload;return{...e,list:e.list.filter((e=>e!==o))};default:return e}},menu:(e=d,t)=>{switch(t.type){case`${c.Mk}`:return{...e,showColorPicker:!0};case`${c.Nv}`:return{...e,menuHeight:t.payload};case`${c.Qc}`:return{...e,showColorPicker:!1};case`${c.lz}`:return{...e,strokeWidth:t.payload};case`${c.VY}`:return{...e,strokeColor:t.payload};case`${c.oL}`:return{...e,fontSize:t.payload};case`${c.uC}`:return{...e,openSubmenu:t.payload};case`${c.rE}`:return{...e,selectedShapeToAdd:t.payload||null};default:return e}},canvas:(e=p,t)=>t.type===`${u.T}`?{...e,canvasApi:t.payload}:e}),b=(0,o.createContext)({state:m,dispatch:r().noop}),g=e=>{const{children:t,initialState:n}=e,[a,r]=(0,o.useReducer)(h,n||m),l=(0,o.useMemo)((()=>({state:a,dispatch:r})),[a]);return o.createElement(b.Provider,{value:l},t)}},4709:(e,t,n)=>{n.d(t,{T:()=>o});const o=(0,n(2246).Z)("SET_CANVAS_API")},9477:(e,t,n)=>{n.d(t,{Mk:()=>a,Nv:()=>r,uC:()=>l,Qc:()=>i,lz:()=>s,VY:()=>c,oL:()=>d,rE:()=>u});var o=n(2246);const a=(0,o.Z)("SHOW_COLOR_PICKER"),r=(0,o.Z)("SET_MENU_HEIGHT"),l=(0,o.Z)("TOGGLE_SUBMENU"),i=(0,o.Z)("HIDE_COLOR_PICKER"),s=(0,o.Z)("SET_STROKE_WIDTH"),c=(0,o.Z)("SET_STROKE_COLOR"),d=(0,o.Z)("SET_FONT_SIZE"),u=(0,o.Z)("SET_SHAPE_TO_ADD")},8477:(e,t,n)=>{var o;n.d(t,{k:()=>o,P:()=>a}),function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(o||(o={}));class a{constructor({type:e=o.Success,message:t}){this.created=new Date,this.type=e,this.message=t}}},5622:(e,t,n)=>{n.d(t,{c:()=>a,F:()=>r});var o=n(2246);const a=(0,o.Z)("SHOW_NOTIFICATION"),r=(0,o.Z)("REMOVE_NOTIFICATION")},1004:(e,t,n)=>{n.d(t,{r:()=>o});const o=(()=>{try{return!1}catch(e){}return!1})()},8328:(e,t,n)=>{n.d(t,{Ak:()=>o,UZ:()=>a,qP:()=>s});var o,a,r=n(6486),l=n.n(r),i=n(1004);!function(e){e.MenuClick="MenuClick",e.GlobalInteraction="GlobalInteraction"}(o||(o={})),function(e){e.AddArrow="add Arrow",e.AddRect="add Rect",e.AddRectRough="add RectRough",e.AddEllipse="add Ellipse",e.AddEllipseRough="add EllipseRough",e.AddText="add Text",e.AddSelectRect="add SelectRect",e.CopyAll="copy all",e.OpenImage="open image",e.ApplyCrop="apply crop",e.SaveImage="save image",e.ChangeColor="change color",e.ChangeFontSize="change font size",e.ChangeStrokeWidth="change stroke width",e.Sketchify="sketchify",e.DropImage="drop image",e.ShownMobileWarning="ShownMobileWarning"}(a||(a={}));const s=l().debounce((e=>{const t={event_category:e.eventCategory};e.eventLabel&&(t.event_label=e.eventLabel),l().isNumber(e.eventValue)&&(t.value=e.eventValue),l().isBoolean(e.nonInteraction)&&(t.non_interaction=e.nonInteraction);const n=["event",e.eventAction,t];if(i.r)console.log(...n);else try{gtag(...n)}catch(e){console.warn(e)}}),100)},7732:(e,t,n)=>{n.d(t,{t:()=>a});const o=JSON.parse('{"menu.openImage":"Open Image","menu.addArrow":"Add Arrow","menu.addRect":"Add Rectangle","menu.addEllipse":"Add Ellipse","menu.addText":"Add Text","menu.select":"Select","menu.resize":"Resize","menu.save":"Save","menu.copyAll":"Copy All","menu.sketchify":"Sketchify","menu.unsketchify":"Unsketchify","menu.about":"About","menu.blank":"Blank","all-copied":"All Copied","back":"Back","how-to-start":"Start by dropping an image here (or draw a shape)"}'),a=e=>o.hasOwnProperty(e)?o[e]:e},8910:(e,t,n)=>{n.d(t,{Z:()=>o});const o=e=>new Promise((t=>{const n=new FileReader;n.onload=n=>{const o=new Image;o.addEventListener("load",(()=>{const n=e.name.split(".").slice(0,-1).join(".");t({image:o,name:n})})),o.src=n.target.result},n.readAsDataURL(e)}))},5822:(e,t,n)=>{var o;n.d(t,{Z:()=>a}),function(e){e.SHAPE="Shape",e.ARROW="Arrow",e.TEXT="Text",e.RECT="Rect",e.IMAGE="Image",e.RECT_ROUGH="RectRough",e.ELLIPSE="Ellipse",e.ELLIPSE_ROUGH="EllipseRough",e.SELECT_RECT="SelectRect"}(o||(o={}));const a=o}},a={};function r(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=o,e=[],r.O=(t,n,o,a)=>{if(!n){var l=1/0;for(d=0;d<e.length;d++){for(var[n,o,a]=e[d],i=!0,s=0;s<n.length;s++)(!1&a||l>=a)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(i=!1,a<l&&(l=a));if(i){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,o,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>"./js/"+e+".chunk-"+{79:"0e4a37c7ef32c19e8da0",178:"a53810dceebe75ae9b58",333:"62697d8bbbbf760c0fe7",678:"94380b043d4a5c3c9746",776:"fbe20211c433f5bf371c"}[e]+".js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},n="imgreview:",r.l=(e,o,a,l)=>{if(t[e])t[e].push(o);else{var i,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==n+a){i=u;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.setAttribute("data-webpack",n+a),i.src=e),t[e]=[o];var p=(n,o)=>{i.onerror=i.onload=null,clearTimeout(m);var a=t[e];if(delete t[e],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((e=>e(o))),n)return n(o)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),s&&document.head.appendChild(i)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.p="/",(()=>{var e={179:0};r.f.j=(t,n)=>{var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise(((n,a)=>o=e[t]=[n,a]));n.push(o[2]=a);var l=r.p+r.u(t),i=new Error;r.l(l,(n=>{if(r.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+a+": "+l+")",i.name="ChunkLoadError",i.type=a,i.request=l,o[1](i)}}),"chunk-"+t,t)}},r.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[l,i,s]=n,c=0;if(l.some((t=>0!==e[t]))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(s)var d=s(r)}for(t&&t(n);c<l.length;c++)a=l[c],r.o(e,a)&&e[a]&&e[a][0](),e[l[c]]=0;return r.O(d)},n=self.webpackChunkimgreview=self.webpackChunkimgreview||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var l=r.O(void 0,[377],(()=>r(1070)));l=r.O(l)})();